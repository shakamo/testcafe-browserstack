<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <title>testcafe-blink-diff</title>
    <style>
      * { margin: 0; padding: 0; }
      body { font-family: Helvetica; }
      ul { list-style-type: none; max-width: 760px; margin: auto; }
      li { margin-top: 20px; }
      button { padding: 5px 10px; background-color: transparent; }
      button ~ button { margin-left: 5px; }
      .noop { -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; }
      .flex { display: flex; text-align: center; align-items: center; justify-content: center; }
      .info { min-width: 33.3%; }
      .passed { color: green; }
      .passed::before { content: '✓ '; font-size: 30px; }
      .failed { color: red; }
      .failed::before { content: '✗ '; font-size: 30px; }
      .modal { position: fixed; left: 0; top: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, .5); overflow: auto; }
      .container { position: absolute; overflow: auto; margin: auto; top: 0; left: 0; right: 0; bottom: 0; }
      .layer { position: absolute; width: 100%; height: 100%; }
      .layer > img { display: block; vertical-align: middle; }
      .overlay { border-right: 1px solid rgba(255, 0, 255, .5); overflow: hidden; }
      .slider { position: absolute; z-index: 1; cursor: ew-resize; width: 32px; height: 32px; background-color: #ff00ff; border: 1px solid rgba(255, 0, 255, .5); border-radius: 50%; transition: background-color .3s }
      .close { position: fixed; right: 10px; top: 10px; background-color: rgba(0, 0, 0, .5); width: 30px; height: 30px; border-radius: 50%; color: white; border: 0; }
    </style>
  </head>
  <body>
    <script type="application/json" id="app">[{"thumbnails":{"actual":"aaa/thumbnails/actual.png","base":"aaa/thumbnails/base.png"},"images":{"actual":"aaa/actual.png","base":"aaa/base.png","out":"aaa/out.png"},"height":1400,"width":2040,"label":"aaa","diff":"3.10","ok":false}]</script>
    <script>!function(n){"function"==typeof define&&define.amd?define(n):n()}(function(){"use strict";var n=function(n){return Array.isArray(n)},t=function(n){return"function"==typeof n},e=function(n){return null==n},r=function(n){return null!==n&&("function"==typeof n||"object"==typeof n)},o=function(n){return"string"==typeof n||"number"==typeof n||"boolean"==typeof n},i=function(e,o){if(t(e)||t(o)||typeof e!=typeof o)return!0;if(n(e)){if(e.length!==o.length)return!0;if(e.some(function(n){return-1===o.indexOf(n)}))return!0}else{if(!r(e))return e!==o;var u=Object.keys(e).sort(),c=Object.keys(o).sort();if(i(u,c))return!0;for(var f=0;f<u.length;f+=1)if(i(e[u[f]],o[c[f]]))return!0}},u=function(e){return!t(e)&&(n(e)?0===e.length:r(e)?0===Object.keys(e).length:void 0===e||""===e||null===e||!1===e)},c=function(t){return n(t)&&t.length<=3&&("string"==typeof t[0]||"function"==typeof t[0])&&!u(t[0])},f=function(t){return(u(t)||n(t)?t:[t])||[]},a=function(n,t){return n.filter(t||function(n){return!u(n)})},s=function(n,t,e){return Array.from({length:Math.max(n.length,t.length)}).map(function(r,o){return e(n[o],t[o],o)})},d=function(n,t,e){return void 0===e&&(e={}),function(){for(var r=[],o=arguments.length;o--;)r[o]=arguments[o];return t===r.length&&n.apply(void 0,r.concat([e]))}},l=function(n,t,e){return n.replaceChild(t,n.childNodes[e])},v=function(n,t){return n.appendChild(t)},h=function(n){return function(n,t){return n&&n.removeChild(t)}(n.parentNode,n)},p="http://www.w3.org/1999/xlink",y=/(\w*)(#[\w-]+)?([\w.-]+)?/;function m(e){return e=c(e)&&t(e[0])?m(e[0](e[1],f(e[2]))):e,n(e[2])&&e[2].forEach(function(n,t){c(n)&&(e[2][t]=m(n))}),e}function w(e){if((n(e[1])||o(e[1]))&&(e[2]=e[1],e[1]=null),t(e[0])&&(e=w(e[0](e[1],f(e[2])))),!c(e))throw new Error("Invalid vnode, given '"+e+"'");var i=e[0].match(y),u=i[1]||"div",a=Object.assign({},e[1]);if(i[2]&&(a.id=i[2].substr(1)),i[3]){var s=i[3].substr(1).split(".");n(a.class)||o(a.class)?(a.class=n(a.class)?a.class:a.class.split(/\W/),a.class=s.concat(a.class).reduce(function(n,t){return-1===n.indexOf(t)&&n.push(t),n},[])):r(a.class)?s.forEach(function(n){a.class[n]=1}):a.class=s}return[u,a,f(e[2])]}function g(n,e,o,i){Object.keys(e).forEach(function(c){if("key"!==c&&!r(e[c])||(e[c]=t(i)&&i(n,c,e[c])||null,"key"!==c)){var f=u(e[c]),a=!0===e[c]?c:e[c],s=c.replace(/^xlink:?/,"");o&&c!==s?f?n.removeAttributeNS(p,s):n.setAttributeNS(p,s,a):f?n.removeAttribute(c):n.setAttribute(c,a)}})}var b="http://www.w3.org/2000/svg";function k(n,t){return void 0===t&&(t=function(n){return n()}),Promise.resolve().then(function(){return t(function(){return n.remove()})})}function E(n,r,i){if(t(n))return n(r,i);if(o(n))return document.createTextNode(n);if(e(n))throw new TypeError("Empty or invalid node, given '"+n+"'");if(!c(n))return n;var f=w([].concat(n)),a=f[0],s=f[1],d=f[2],l=r||"svg"===a,v=l?document.createElementNS(b,a):document.createElement(a);return t(i)&&(v=i(v,a,s,d)||v),t(v)?E(v(),l,i):(u(s)||g(v,s,l,i),t(v.oncreate)&&v.oncreate(v),t(v.enter)&&v.enter(),v.remove=function(){return Promise.resolve().then(function(){return t(v.ondestroy)&&v.ondestroy(v)}).then(function(){return t(v.teardown)&&v.teardown()}).then(function(){return t(v.exit)&&v.exit()}).then(function(){return h(v)})},d.forEach(function(n){u(n)||v.appendChild(E(n,l,i))}),v)}function x(n,t,e){void 0===e&&(e=E),"function"==typeof t&&(e=t,t=n,n=void 0),t||(t=n,n=void 0),n||(n=document.body),"string"==typeof n&&(n=document.querySelector(n));var r=o(t)||c(t)?e(t):t;return v(n,r),r}function O(n,e,r,u,f,a){if(void 0===a&&(a=0),null===a){var d=w([].concat(e)),h=w([].concat(r));(function(n,t,e,r,o){var u,c=Object.keys(t).concat(Object.keys(e)).reduce(function(n,r){return r in t&&!(r in e)?(n[r]=null,u=!0):i(t[r],e[r])&&(n[r]=e[r],u=!0),n},{});return u&&g(n,c,r,o),u})(n,d[1],h[1],u,f)&&(t(n.onupdate)&&n.onupdate(n),t(n.update)&&n.update()),s(d[2],h[2],function(t,e,r){return O(n,t,e,u,f,r)})}else o(e)&&o(r)?i(e,r)&&(n.childNodes[a].nodeValue=r):!e&&r?v(n,E(r,u,f)):e&&!r?k(n.childNodes[a]):e[0]!==r[0]?c(e)&&c(r)?l(n,E(r,u,f),a):s(e,r,function(t,e,r){return O(n,t,e,u,f,r)}):O(n.childNodes[a],e,r,u,f,null)}function L(t){return i=function(n,t){return n?t:void 0},e(o=t)?[]:r(o)?n(o)?a(o):a(Object.keys(o).reduce(function(n,t){return e(o[t])||n.push(i(o[t],t)),n},[])):o;var o,i}function N(e,i,u,c){if(r(c)){if(t(c))return c(u,i,e);if(t(c[i]))return c[i](u,i,e)}r(u)&&function(e,r,i){n(i)?e.setAttribute("data-"+r,JSON.stringify(i)):t(i)||Object.keys(i).forEach(function(n){var t=o(i[n])?i[n]:JSON.stringify(i[n]);e.setAttribute(("data"!==r?"data-":"")+r+"-"+n,t)})}(e,i,u)}var j=["oncreate","onupdate","ondestroy"];function C(n){return n.currentTarget.events[n.type](n)}function A(n,e,o,i){if(t(o))if(n.events=n.events||{},n.teardown||(n.teardown=function(){return Object.keys(n.events).map(function(t){return n.removeEventListener(t,C)})}),"on"===e.substr(0,2)&&-1===j.indexOf(e)){var u=e.substr(2);n.events[u]||n.addEventListener(u,C,!1),n.events[u]=function(n){return function(n,e,o,i){var u;r(i)&&(t(i)?u=!1===i(e,n):t(i[e])&&(u=!1===i[e](n))),u||o(n)}(n,e,o,i)}}else(j.indexOf(e)>-1?n:n.events)[e]=o}var S,M=function(n){for(var e=[],r=arguments.length-1;r-- >0;)e[r]=arguments[r+1];var o=a(e,t),i=function(){for(var n=[],t=arguments.length;t--;)n[t]=arguments[t];return o.reduce(function(t,e){return e.apply(void 0,n)||t},void 0)};return function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return t.length<=2?n(t[0],t[1],i):i.apply(void 0,t)}}(E,d(A,3,S),function(n){return d(N,3,n)}({class:function(n){return L(n).join(" ")}}));function I(n){var t,e,r,o=x(n.parentNode,["div",{class:"slider"}],M);function i(){t=n.parentNode.offsetWidth,e=n.parentNode.offsetHeight,n.style.width=t/2+"px",o.style.left=t/2-o.offsetWidth/2+"px",o.style.top=e/2-o.offsetHeight/2+"px"}function u(t){n.style.width=t+"px",o.style.left=n.offsetWidth-o.offsetWidth/2+"px"}function c(e){var o;if(!r)return!1;(o=function(t){var e=n.getBoundingClientRect(),r=(t||window.event).pageX-e.left;return r-=window.pageXOffset}(e))<0&&(o=0),o>t&&(o=t),u(o)}function f(n){n.preventDefault(),r=1,window.addEventListener("mousemove",c),window.addEventListener("touchmove",c)}function a(){r=0}return i(),o.addEventListener("mousedown",f),o.addEventListener("touchstart",f),window.addEventListener("mouseup",a),window.addEventListener("touchstop",a),{set width(n){u(n)},get width(){return parseInt(n.style.width,10)},update:function(){i()},teardown:function(){o.removeEventListener("mousedown",f),o.removeEventListener("touchstart",f),window.removeEventListener("mouseup",a),window.removeEventListener("touchstop",a),window.removeEventListener("mousemove",c),window.removeEventListener("touchmove",c),k(o)}}}function T(n,t,e){var r,o;function i(n){window.removeEventListener("keyup",n),document.body.style.overflow="",r&&r.teardown(),o.unmount()}function u(n){37===n.keyCode&&o.prev(n),39===n.keyCode&&o.next(n),9===n.keyCode&&(n.preventDefault(),o.change()),27===n.keyCode&&i(u)}function c(n){n&&n.target!==o.target||i(u)}function f(){return I(document.querySelector(".overlay"))}function a(){r&&r.update()}window.addEventListener("keyup",u);var s=function(n,t,e){return function(r,o){void 0===o&&(o=E);var i,u,c=Object.assign({},t),f=Object.keys(e).reduce(function(t,r){return t[r]=function(){for(var t=[],a=arguments.length;a--;)t[a]=arguments[a];return Promise.resolve().then(function(){return e[r].apply(e,t)(c)}).then(function(n){return Object.assign(c,n)}).then(function(t){O(i,u,u=m(n(t,f)),null,o,null)})},t},{});return i=x(r,u=m(n(c,f)),o),f.unmount=function(){return k(i)},f.target=i,f}}(function(n){var t=n.key,r=n.diff;return[".noop.modal",{onclick:c},[[".container",{style:"width:"+e[t].width+"px;height:"+e[t].height+"px",onupdate:a},(r?[["img",{src:e[t].images.out}]]:[[".layer",[["img.a",{src:e[t].images.actual}]]],[".layer.overlay",[["img.b",{src:e[t].images.base}]]]]).concat([["button.close",{onclick:function(){return c()}},"×"]])]]]},{diff:t,key:n},{next:function(n){return function(t){var o=t.key;if(t.diff||!n.shiftKey)return{key:Math.min(o+1,e.length-1)};r.width=Math.min(e[o].width,r.width+.25*e[o].width)}},prev:function(n){return function(t){var o=t.key;if(t.diff||!n.shiftKey)return{key:Math.max(o-1,0)};r.width=Math.max(0,r.width-.25*e[o].width)}},change:function(){return function(n){var t=n.diff;return r?(r.teardown(),r=null):t&&setTimeout(function(){r=f()}),{diff:!t}}}});o=s(document.body,M),document.body.style.overflow="hidden",t||(r=f())}var W=document.getElementById("app"),D=JSON.parse(W.innerHTML);W.parentNode.removeChild(W),x([function(){return D.length?["ul",D.map(function(n,t){return function(n,t){return["li",[["strong",n.label],[".flex",[["img.noop",{src:n.thumbnails.base}],["img.noop",{src:n.thumbnails.actual}],[".info",{class:n.ok?"passed":"failed"},[["h3",n.ok?"It passed.":"It did not passed"],["h2","Diff: "+n.diff+"%"],["button.noop",{onclick:function(){return T(t,!0,D)}},"Open diff"],["button.noop",{onclick:function(){return T(t,!1,D)}},"Compare"]]]]]]]}(n,t)})]:["ul",[["li","No differences to report"]]]}],M)});
//# sourceMappingURL=reporter.umd.js.map

</script>
  </body>
</html>
